<!DOCTYPE html>
<html>
<head>
  <title>Banker's Algorithm Simulator</title>
  	<!-- javascript link-->
  	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>

  	<!--font awesome link -->
  	<script defer src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/js/all.min.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0f0d0e;/* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
      color: violet;
    }

    button {
  font-family: monospace;
  font-size: 1.5rem;
  color: #FAFAFA;
  text-transform: uppercase;
  padding: 10px 10px;
  border-radius: 10px;
  border: 2px solid #FAFAFA;
  background: #1E1B77;
  box-shadow: 3px 3px #fafafa;
  cursor: pointer;
  margin: 5px 0;
}

button:active {
  box-shadow: none;
  transform: translate(3px, 3px);
}

    h1 {
      text-align: center;
      
    }

    table {
      margin: 20px auto;
      border-collapse: collapse;
    }

    th, td {
      padding: 10px;
      text-align: center;
      border: 1px solid #ccc;
    }

    .error {
      color: red;
      font-weight: bold;
      margin-top: 10px;
      text-align: center;
    }

    .success {
      color: violet;
      font-weight:400;
      margin-top: 10px;
      text-align: center;
    }

    .input-container {
      margin-bottom: 10px;
    }

    label {
      font-weight: bold;
    }

    input[type="text"], input[type="number"], select {
      padding: 8px;
      width: 100%;
      box-sizing: border-box;
    }

    body {
      background-color: #1E1B77;
      font-family: 'Outfit', sans-serif;
      font-size: x-large;
    }
    .button {
        background-color: white;
        color: #1E1B77;
        border: none;
        padding: 10px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        margin: 4px 2px;
        cursor: pointer;
        transition-duration: 0.5s;
        font-family: 'Outfit', sans-serif;
        font-weight: 550;
      }
    .button1 {
        background-color: #1E1B77; 
        color: white; 
        border-radius: 5px;
        border: 2px solid white;
      }
    
    .button1:hover {
       background-color: violet;
       color: #0f0d0e;
    }
    nav {
      background-color: #0f0d0e;
      height: 90px;
      display:flex;
      justify-content:space-between;
      background: rgba(10, 4, 4, 0);
      position:relative;
    }
      
    ul {
      list-style: none;
      margin-right: 4%;
      padding: 0;
      display:flex;
      justify-content:right;
      align-items: center;
      height: 100%;
    }
    
    li {
      margin: 0 20px;
    
    }
    
    a {
      color: violet;
      text-decoration: none;
      font-size: 20px;
      font-weight:bold;
      text-transform: uppercase;
    }
    
    
    
    
    
    
    *{
      border: 0;
      margin: 0;
  }
    
    /* dropdown*/
    
    
    
    .dropdown-content {
      display: none;
      position: absolute;
      min-width: 135px;
      box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
      z-index: 1;
      background: rgba(2, 2, 0, 0.45);
      border-radius: 5px;
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10.3px);
      -webkit-backdrop-filter: blur(10.3px);
      
    }
    .input-container{
  background-color: #1E1B77;
  height: 70px;
  padding: 10px;
  /* text-align: center; */
  border: 2px solid white;
  border-radius: 5px;
  /* box-shadow: 3px 3px 2px rgb(249, 255, 85); */
}

.input-container:focus {
  color: rgb(0, 255, 255);
  background-color: #1E1B77;
  outline-color: rgb(0, 255, 255);
  box-shadow: -3px -3px 15px rgb(0, 255, 255);
  transition: .1s;
  transition-property: box-shadow;
}
    .dropdown-content a {
      color: violet;
      padding: 12px 16px;
      text-decoration: none;
      display: block;
      border: none;
      cursor: pointer;
      transition-duration: 0.25s;
      font-family: 'Outfit', sans-serif;
      font-weight: 550;
      font-size: small;
    
    }
    
    .dropdown-content a:hover {
      background-color:violet;
      color: #0f0d0e;
      border-radius: 5px;
    }
    
    .dropdown:hover .dropdown-content {
      display: block;
    }
    

    #output {
      margin-top: 20px;
      font-weight: bold;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="total">
    <nav>
      <ul>
          <li><button onclick="location.href = '../index.html';" class="button button1">Home</button></li>
          <li class="dropdown"><button class="button button1 dropbtn">Algorithms</button>
            <div class="dropdown-content">
                <a href="../process_scheduling/process.html">Process Scheduling</a>
                <a href="../process_sync\home.html">Process Synchronization</a>
                <a href="../Bankers/bankers.html">Bankers Algorithm</a>
                <a href="../mft_mvt/Fit.html">Fit Algorithms</a>
                <a href="../Page_Replacement Algo/page replacement_home.html">Page Replacement Algorithm</a>
                <a href="../Disk/disk.html">Disk Scheduling</a>
                <a href="../file allocation/file.html">File Allocation</a>
                <a href="../mft_mvt\MVFT.html">MFT and MVT</a>
            </div>
        </li>
          <li><button class="button button1">About</button></li>
          <li><button class="button button1">References</button></li>
              </ul>
              </ul>
          </div>
      </ul>   
          </div>
  </nav>
    <h1>Banker's Algorithm Simulator</h1>
  
    <div class="input-container">
      <label for="resources">Available Resources:</label>
      <input type="text" id="resources" placeholder="e.g., 10 5 7">
    </div>
  
    <table id="max-allocations">
      <caption>Maximum Resource Allocation</caption>
      <thead>
        <tr>
          <th>Process</th>
          <th>Resource 1</th>
          <th>Resource 2</th>
          <th>Resource 3</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>P0</td>
          <td><input type="number" min="0"></td>
          <td><input type="number" min="0"></td>
          <td><input type="number" min="0"></td>
        </tr>
        <tr>
          <td>P1</td>
          <td><input type="number" min="0"></td>
          <td><input type="number" min="0"></td>
          <td><input type="number" min="0"></td>
        </tr>
        <!-- Add more rows for additional processes -->
      </tbody>
    </table>
  
    <div class="input-container">
      <label for="request-process">Request Resource for Process:</label>
      <select id="request-process">
        <option value="P0">P0</option>
        <option value="P1">P1</option>
        <!-- Add more options for additional processes -->
      </select>
    </div>
  
    <div class="input-container">
      <label for="request">Resource Request:</label>
      <input type="text" id="request" placeholder="e.g., 3 2 4">
    </div>
  
    <button id="simulate-button">Simulate</button>
  
    <div id="output"></div>
  
    <script>
      // Banker's Algorithm Simulation
      document.getElementById('simulate-button').addEventListener('click', simulate);
  
      function simulate() {
        const resourcesInput = document.getElementById('resources');
        const maxAllocationRows = document.querySelectorAll('#max-allocations tbody tr');
        const requestProcess = document.getElementById('request-process').value;
        const requestInput = document.getElementById('request');
  
        const available = resourcesInput.value.split(' ').map(Number);
        const maxAllocations = Array.from(maxAllocationRows, row =>
          Array.from(row.querySelectorAll('input[type="number"]'), input => Number(input.value))
        );
        const request = requestInput.value.split(' ').map(Number);
  
        if (available.length !== maxAllocations[0].length || available.length !== request.length) {
          showError('Invalid input! Please provide valid values.');
          return;
        }
  
        if (!isValidState(available, maxAllocations)) {
          showError('Invalid input! Maximum allocation exceeds available resources.');
          return;
        }
  
        if (!isSafeState(available, maxAllocations, requestProcess, request)) {
          showError('Unsafe state! The resource request cannot be granted.');
          return;
        }
  
        showSuccess('Safe state! The resource request can be granted.');
      }
  
      function isValidState(available, maxAllocations) {
        for (let i = 0; i < available.length; i++) {
          let totalAllocation = 0;
          for (let j = 0; j < maxAllocations.length; j++) {
            totalAllocation += maxAllocations[j][i];
          }
          if (totalAllocation > available[i]) {
            return false;
          }
        }
        return true;
      }
  
      function isSafeState(available, maxAllocations, requestProcess, request) {
        const work = available.slice();
        const allocation = maxAllocations.map(row => row.slice());
        const requestIndex = parseInt(requestProcess.slice(1));
  
        for (let i = 0; i < work.length; i++) {
          if (request[i] > work[i]) {
            return false;
          }
        }
  
        work.forEach((value, index) => {
          work[index] -= request[index];
          allocation[requestIndex][index] += request[index];
        });
  
        const finish = Array(maxAllocations.length).fill(false);
        let count = 0;
  
        while (count < maxAllocations.length) {
          let found = false;
          for (let i = 0; i < maxAllocations.length; i++) {
            if (!finish[i]) {
              let j;
              for (j = 0; j < work.length; j++) {
                if (allocation[i][j] > work[j]) {
                  break;
                }
              }
              if (j === work.length) {
                finish[i] = true;
                found = true;
                count++;
                work.forEach((value, index) => {
                  work[index] += maxAllocations[i][index];
                });
              }
            }
          }
          if (!found) {
            break;
          }
        }
  
        return count === maxAllocations.length;
      }
  
      function showError(message) {
        const output = document.getElementById('output');
        output.textContent = message;
        output.className = 'error';
      }
  
      function showSuccess(message) {
        const output = document.getElementById('output');
        output.textContent = message;
        output.className = 'success';
      }
    </script>
  </div>
</body>
</html>
